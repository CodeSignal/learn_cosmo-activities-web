<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeSignal Color Swatch Sheet</title>
    <link rel="stylesheet" href="colors.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--Colors-Backgrounds-Main-Default);
            color: var(--Colors-Text-Body-Default);
            padding: 2rem;
            line-height: 1.6;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--Colors-Text-Body-Strongest);
        }

        h2 {
            font-size: 1.75rem;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--Colors-Stroke-Default);
            color: var(--Colors-Text-Body-Strong);
        }

        h3 {
            font-size: 1.25rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: var(--Colors-Text-Body-Strong);
        }

        .intro {
            margin-bottom: 2rem;
            color: var(--Colors-Text-Body-Medium);
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .color-swatch {
            background: var(--Colors-Backgrounds-Main-Top);
            border: 1px solid var(--Colors-Stroke-Default);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .color-swatch:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .color-preview {
            width: 100%;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .color-preview::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(45deg, #ccc 25%, transparent 25%),
                linear-gradient(-45deg, #ccc 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #ccc 75%),
                linear-gradient(-45deg, transparent 75%, #ccc 75%);
            background-size: 10px 10px;
            background-position: 0 0, 0 5px, 5px -5px, -5px 0px;
            opacity: 0.3;
            z-index: 0;
        }

        .color-fill {
            width: 100%;
            height: 100%;
            position: relative;
            z-index: 1;
        }

        .color-info {
            padding: 0.75rem;
        }

        .color-name {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            color: var(--Colors-Text-Body-Strong);
            word-break: break-word;
        }

        .color-value {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.75rem;
            color: var(--Colors-Text-Body-Medium);
            background: var(--Colors-Backgrounds-Main-Light);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 0.25rem;
        }

        .color-reference {
            font-family: 'Monaco', 'Menlo', 'Courier New', monospace;
            font-size: 0.7rem;
            color: var(--Colors-Text-Body-Light);
            font-style: italic;
        }

        .section {
            margin-bottom: 3rem;
        }

        .scale-group {
            margin-bottom: 2rem;
        }

        .scale-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: var(--Colors-Text-Body-Strong);
        }
    </style>
</head>
<body>
    <h1>CodeSignal Color Swatch Sheet</h1>
    <p class="intro">Visual reference for all colors defined in colors.css</p>

    <h2>Numbered Color Scales</h2>
    <p class="intro">Base color definitions - all semantic colors reference these</p>

    <div class="section">
        <h3>Primary Scale</h3>
        <div class="color-grid" id="primary-scale"></div>
    </div>

    <div class="section">
        <h3>Neutral Scale</h3>
        <div class="color-grid" id="neutral-scale"></div>
    </div>

    <div class="section">
        <h3>Accent Green Scale</h3>
        <div class="color-grid" id="green-scale"></div>
    </div>

    <div class="section">
        <h3>Accent Sky Blue Scale</h3>
        <div class="color-grid" id="sky-blue-scale"></div>
    </div>

    <div class="section">
        <h3>Accent Yellow Scale</h3>
        <div class="color-grid" id="yellow-scale"></div>
    </div>

    <div class="section">
        <h3>Accent Orange Scale</h3>
        <div class="color-grid" id="orange-scale"></div>
    </div>

    <div class="section">
        <h3>Accent Red Scale</h3>
        <div class="color-grid" id="red-scale"></div>
    </div>

    <h2>Semantic Colors</h2>
    <p class="intro">Semantic color names that reference the numbered scales above</p>

    <div class="section">
        <h3>Primary Semantic Colors</h3>
        <div class="color-grid" id="primary-semantic"></div>
    </div>

    <div class="section">
        <h3>Background Colors</h3>
        <div class="color-grid" id="background-colors"></div>
    </div>

    <div class="section">
        <h3>Text Colors</h3>
        <div class="color-grid" id="text-colors"></div>
    </div>

    <div class="section">
        <h3>Icon Colors</h3>
        <div class="color-grid" id="icon-colors"></div>
    </div>

    <div class="section">
        <h3>Stroke Colors</h3>
        <div class="color-grid" id="stroke-colors"></div>
    </div>

    <div class="section">
        <h3>Alert Success Colors</h3>
        <div class="color-grid" id="success-colors"></div>
    </div>

    <div class="section">
        <h3>Alert Error Colors</h3>
        <div class="color-grid" id="error-colors"></div>
    </div>

    <div class="section">
        <h3>Alert Warning Colors</h3>
        <div class="color-grid" id="warning-colors"></div>
    </div>

    <div class="section">
        <h3>Alert Info Colors</h3>
        <div class="color-grid" id="info-colors"></div>
    </div>

    <script>
        // Cache for CSS variable references (light and dark mode)
        let cssVariableReferences = { light: null, dark: null };
        const semanticSwatches = new Map(); // Store swatches by variable name for updates

        // Detect current color scheme
        function getCurrentColorScheme() {
            return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        }

        // Extract content between matching braces
        function extractBracedContent(text, startIndex) {
            let depth = 0;
            let start = -1;
            let end = -1;
            
            for (let i = startIndex; i < text.length; i++) {
                if (text[i] === '{') {
                    if (start === -1) start = i + 1;
                    depth++;
                } else if (text[i] === '}') {
                    depth--;
                    if (depth === 0 && start !== -1) {
                        end = i;
                        break;
                    }
                }
            }
            
            return start !== -1 && end !== -1 ? text.substring(start, end) : '';
        }

        // Fetch and parse CSS to extract variable references for both light and dark mode
        async function loadCSSReferences() {
            if (cssVariableReferences.light && cssVariableReferences.dark) {
                return cssVariableReferences;
            }
            
            try {
                const response = await fetch('colors.css');
                const cssText = await response.text();
                
                // Parse light mode (default :root section)
                const lightRootIndex = cssText.indexOf(':root');
                if (lightRootIndex !== -1) {
                    const lightModeCSS = extractBracedContent(cssText, lightRootIndex);
                    cssVariableReferences.light = {};
                    
                    const regex = /(--Colors[^:]+):\s*var\(([^)]+)\)/g;
                    let match;
                    while ((match = regex.exec(lightModeCSS)) !== null) {
                        const semanticVar = match[1].trim();
                        const referencedVar = match[2].trim();
                        cssVariableReferences.light[semanticVar] = referencedVar;
                    }
                }
                
                // Parse dark mode (@media prefers-color-scheme: dark section)
                const darkMediaIndex = cssText.indexOf('@media (prefers-color-scheme: dark)');
                if (darkMediaIndex !== -1) {
                    const darkMediaContent = extractBracedContent(cssText, darkMediaIndex);
                    const darkRootIndex = darkMediaContent.indexOf(':root');
                    if (darkRootIndex !== -1) {
                        const darkModeCSS = extractBracedContent(darkMediaContent, darkRootIndex);
                        cssVariableReferences.dark = {};
                        
                        const regex = /(--Colors-[^:]+):\s*var\(([^)]+)\)/g;
                        let match;
                        while ((match = regex.exec(darkModeCSS)) !== null) {
                            const semanticVar = match[1].trim();
                            const referencedVar = match[2].trim();
                            cssVariableReferences.dark[semanticVar] = referencedVar;
                        }
                    }
                }
            } catch (error) {
                console.error('Error loading CSS references:', error);
                cssVariableReferences.light = {};
                cssVariableReferences.dark = {};
            }
            
            return cssVariableReferences;
        }

        // Get reference for a variable based on current color scheme
        function getReferenceForVariable(varName) {
            const scheme = getCurrentColorScheme();
            const references = cssVariableReferences[scheme];
            return references && references[varName] ? references[varName] : null;
        }

        // Helper function to create a color swatch
        function createSwatch(varName, displayName, referencedVar = null, isSemantic = false) {
            const swatch = document.createElement('div');
            swatch.className = 'color-swatch';
            
            const preview = document.createElement('div');
            preview.className = 'color-preview';
            
            const fill = document.createElement('div');
            fill.className = 'color-fill';
            fill.style.backgroundColor = `var(${varName})`;
            preview.appendChild(fill);
            
            const info = document.createElement('div');
            info.className = 'color-info';
            
            const name = document.createElement('div');
            name.className = 'color-name';
            name.textContent = displayName;
            
            const value = document.createElement('div');
            value.className = 'color-value';
            const computedStyle = getComputedStyle(document.documentElement);
            const colorValue = computedStyle.getPropertyValue(varName).trim();
            value.textContent = colorValue || 'N/A';
            
            info.appendChild(name);
            info.appendChild(value);
            
            // Add referenced variable if provided (for semantic colors)
            if (referencedVar !== null) {
                const reference = document.createElement('div');
                reference.className = 'color-reference';
                reference.textContent = `→ ${referencedVar}`;
                reference.dataset.varName = varName; // Store for updates
                info.appendChild(reference);
            }
            
            swatch.appendChild(preview);
            swatch.appendChild(info);
            
            // Store semantic swatches for dynamic updates
            if (isSemantic) {
                semanticSwatches.set(varName, { swatch, referenceElement: referencedVar !== null ? info.querySelector('.color-reference') : null });
            }
            
            return swatch;
        }

        // Update semantic color references and hex values when color scheme changes
        function updateSemanticReferences() {
            const computedStyle = getComputedStyle(document.documentElement);
            
            semanticSwatches.forEach(({ swatch, referenceElement }, varName) => {
                // Update hex value
                const valueElement = swatch.querySelector('.color-value');
                if (valueElement) {
                    const colorValue = computedStyle.getPropertyValue(varName).trim();
                    valueElement.textContent = colorValue || 'N/A';
                }
                
                // Update referenced variable
                if (referenceElement) {
                    const newReference = getReferenceForVariable(varName);
                    if (newReference) {
                        referenceElement.textContent = `→ ${newReference}`;
                    } else {
                        referenceElement.textContent = '';
                    }
                }
            });
        }

        // Numbered scales
        const numberedScales = {
            'primary-scale': [
                '--Colors-Base-Primary-20', '--Colors-Base-Primary-50', '--Colors-Base-Primary-100', '--Colors-Base-Primary-150',
                '--Colors-Base-Primary-200', '--Colors-Base-Primary-250', '--Colors-Base-Primary-300', '--Colors-Base-Primary-350',
                '--Colors-Base-Primary-400', '--Colors-Base-Primary-450', '--Colors-Base-Primary-500', '--Colors-Base-Primary-550',
                '--Colors-Base-Primary-600', '--Colors-Base-Primary-650', '--Colors-Base-Primary-700', '--Colors-Base-Primary-750',
                '--Colors-Base-Primary-800', '--Colors-Base-Primary-850', '--Colors-Base-Primary-900', '--Colors-Base-Primary-950',
                '--Colors-Base-Primary-1000', '--Colors-Base-Primary-1050', '--Colors-Base-Primary-1100', '--Colors-Base-Primary-1150',
                '--Colors-Base-Primary-1200', '--Colors-Base-Primary-1250', '--Colors-Base-Primary-1300', '--Colors-Base-Primary-1350',
                '--Colors-Base-Primary-1400'
            ],
            'neutral-scale': [
                '--Colors-Base-Neutral-00', '--Colors-Base-Neutral-20', '--Colors-Base-Neutral-50', '--Colors-Base-Neutral-100',
                '--Colors-Base-Neutral-150', '--Colors-Base-Neutral-200', '--Colors-Base-Neutral-250', '--Colors-Base-Neutral-300',
                '--Colors-Base-Neutral-350', '--Colors-Base-Neutral-400', '--Colors-Base-Neutral-450', '--Colors-Base-Neutral-500',
                '--Colors-Base-Neutral-550', '--Colors-Base-Neutral-600', '--Colors-Base-Neutral-650', '--Colors-Base-Neutral-700',
                '--Colors-Base-Neutral-750', '--Colors-Base-Neutral-800', '--Colors-Base-Neutral-850', '--Colors-Base-Neutral-900',
                '--Colors-Base-Neutral-950', '--Colors-Base-Neutral-1000', '--Colors-Base-Neutral-1050', '--Colors-Base-Neutral-1100',
                '--Colors-Base-Neutral-1150', '--Colors-Base-Neutral-1200', '--Colors-Base-Neutral-1250', '--Colors-Base-Neutral-1300',
                '--Colors-Base-Neutral-1350', '--Colors-Base-Neutral-1400', '--Colors-Base-Neutral-1450', '--Colors-Base-Neutral-1500',
                '--Colors-Base-Neutral-1600'
            ],
            'green-scale': [
                '--Colors-Base-Accent-Green-20', '--Colors-Base-Accent-Green-50', '--Colors-Base-Accent-Green-100',
                '--Colors-Base-Accent-Green-200', '--Colors-Base-Accent-Green-300', '--Colors-Base-Accent-Green-400',
                '--Colors-Base-Accent-Green-500', '--Colors-Base-Accent-Green-600', '--Colors-Base-Accent-Green-700',
                '--Colors-Base-Accent-Green-800', '--Colors-Base-Accent-Green-900', '--Colors-Base-Accent-Green-1000'
            ],
            'sky-blue-scale': [
                '--Colors-Base-Accent-Sky-Blue-20', '--Colors-Base-Accent-Sky-Blue-50', '--Colors-Base-Accent-Sky-Blue-100',
                '--Colors-Base-Accent-Sky-Blue-200', '--Colors-Base-Accent-Sky-Blue-300', '--Colors-Base-Accent-Sky-Blue-400',
                '--Colors-Base-Accent-Sky-Blue-500', '--Colors-Base-Accent-Sky-Blue-600', '--Colors-Base-Accent-Sky-Blue-700',
                '--Colors-Base-Accent-Sky-Blue-800', '--Colors-Base-Accent-Sky-Blue-900', '--Colors-Base-Accent-Sky-Blue-1000',
                '--Colors-Base-Accent-Sky-Blue-1100', '--Colors-Base-Accent-Sky-Blue-1200'
            ],
            'yellow-scale': [
                '--Colors-Base-Accent-Yellow-20', '--Colors-Base-Accent-Yellow-50', '--Colors-Base-Accent-Yellow-100',
                '--Colors-Base-Accent-Yellow-200', '--Colors-Base-Accent-Yellow-300', '--Colors-Base-Accent-Yellow-400',
                '--Colors-Base-Accent-Yellow-500', '--Colors-Base-Accent-Yellow-600', '--Colors-Base-Accent-Yellow-700',
                '--Colors-Base-Accent-Yellow-800', '--Colors-Base-Accent-Yellow-900', '--Colors-Base-Accent-Yellow-1000'
            ],
            'orange-scale': [
                '--Colors-Base-Accent-Orange-20', '--Colors-Base-Accent-Orange-50', '--Colors-Base-Accent-Orange-100',
                '--Colors-Base-Accent-Orange-200', '--Colors-Base-Accent-Orange-300', '--Colors-Base-Accent-Orange-400',
                '--Colors-Base-Accent-Orange-500', '--Colors-Base-Accent-Orange-600', '--Colors-Base-Accent-Orange-700',
                '--Colors-Base-Accent-Orange-800', '--Colors-Base-Accent-Orange-900', '--Colors-Base-Accent-Orange-1000'
            ],
            'red-scale': [
                '--Colors-Base-Accent-Red-20', '--Colors-Base-Accent-Red-50', '--Colors-Base-Accent-Red-100',
                '--Colors-Base-Accent-Red-200', '--Colors-Base-Accent-Red-300', '--Colors-Base-Accent-Red-400',
                '--Colors-Base-Accent-Red-500', '--Colors-Base-Accent-Red-600', '--Colors-Base-Accent-Red-700',
                '--Colors-Base-Accent-Red-800', '--Colors-Base-Accent-Red-900', '--Colors-Base-Accent-Red-1000'
            ]
        };

        // Semantic colors
        const semanticColors = {
            'primary-semantic': [
                '--Colors-Base-Primary-default', '--Colors-Base-Primary-lightest', '--Colors-Base-Primary-lighter',
                '--Colors-Base-Primary-light', '--Colors-Base-Primary-medium-light', '--Colors-Base-Primary-medium',
                '--Colors-Base-Primary-medium-dark', '--Colors-Base-Primary-dark', '--Colors-Base-Primary-darker',
                '--Colors-Base-Primary-darkest'
            ],
            'background-colors': [
                '--Colors-Backgrounds-Main-Default', '--Colors-Backgrounds-Main-Light', '--Colors-Backgrounds-Main-Medium',
                '--Colors-Backgrounds-Main-Strong', '--Colors-Backgrounds-Main-Dark', '--Colors-Backgrounds-Main-Darker',
                '--Colors-Backgrounds-Main-Top', '--Colors-Backgrounds-Main-Black'
            ],
            'text-colors': [
                '--Colors-Text-Body-Default', '--Colors-Text-Body-Medium', '--Colors-Text-Body-Light',
                '--Colors-Text-Body-Strong', '--Colors-Text-Body-Strongest'
            ],
            'icon-colors': [
                '--Colors-Icon-Default', '--Colors-Icon-Medium', '--Colors-Icon-Strong', '--Colors-Icon-Primary'
            ],
            'stroke-colors': [
                '--Colors-Stroke-Default', '--Colors-Stroke-Lighter', '--Colors-Stroke-Light',
                '--Colors-Stroke-Medium', '--Colors-Stroke-Strong', '--Colors-Stroke-Stronger',
                '--Colors-Stroke-Primary', '--Colors-Stroke-Primary-Light', '--Colors-Stroke-Primary-Medium',
                '--Colors-Stroke-Primary-Dark', '--Colors-Stroke-Background'
            ],
            'success-colors': [
                '--Colors-Alert-Success-Default', '--Colors-Alert-Success-Lighter', '--Colors-Alert-Success-Light',
                '--Colors-Alert-Success-Medium', '--Colors-Alert-Success-Medium-Dark', '--Colors-Alert-Success-Dark'
            ],
            'error-colors': [
                '--Colors-Alert-Error-Default', '--Colors-Alert-Error-Lighter', '--Colors-Alert-Error-Light',
                '--Colors-Alert-Error-Medium', '--Colors-Alert-Error-Medium-Dark', '--Colors-Alert-Error-Dark'
            ],
            'warning-colors': [
                '--Colors-Alert-Warning-Default', '--Colors-Alert-Warning-Lighter', '--Colors-Alert-Warning-Light',
                '--Colors-Alert-Warning-Medium', '--Colors-Alert-Warning-Medium-Dark', '--Colors-Alert-Warning-Dark'
            ],
            'info-colors': [
                '--Colors-Alert-Info-Default', '--Colors-Alert-Info-Lighter', '--Colors-Alert-Info-Light',
                '--Colors-Alert-Info-Medium', '--Colors-Alert-Info-Medium-Dark', '--Colors-Alert-Info-Dark'
            ]
        };

        // Render numbered scales
        Object.entries(numberedScales).forEach(([containerId, vars]) => {
            const container = document.getElementById(containerId);
            vars.forEach(varName => {
                const displayName = varName.replace('--Colors-', '').replace(/-/g, ' ');
                container.appendChild(createSwatch(varName, displayName));
            });
        });

        // Render semantic colors with references
        async function renderSemanticColors() {
            await loadCSSReferences();
            
            Object.entries(semanticColors).forEach(([containerId, vars]) => {
                const container = document.getElementById(containerId);
                vars.forEach(varName => {
                    const displayName = varName.replace('--Colors-', '').replace(/-/g, ' ');
                    const referencedVar = getReferenceForVariable(varName);
                    container.appendChild(createSwatch(varName, displayName, referencedVar, true));
                });
            });
        }

        // Initialize and listen for color scheme changes
        renderSemanticColors();
        
        // Listen for color scheme changes
        const colorSchemeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        colorSchemeMediaQuery.addEventListener('change', () => {
            updateSemanticReferences();
        });
    </script>
</body>
</html>
